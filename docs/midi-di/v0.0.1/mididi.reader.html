<!DOCTYPE html>

<html>
<head>
    <title>Docs: mididi.reader

</title>
    <!-- <link rel="shortcut icon" href="" /> -->

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica', 'Arial', 'sans-serif', 'Segoe UI Emoji';
        }

        /*--- generic element styling ---*/

        a {
            color: #5544FF;
        }
        a:hover {
            color: #6688AA;
        }

        h1 {
            padding-top: 35px;
            padding-bottom: 10px;
            font-weight: 510;
            font-size: 2rem;
        }
        h2 {
            padding-top: 35px;
            padding-bottom: 10px;
            font-weight: 510;
            font-size: 1.5rem;
        }
        h3 {
            padding-top: 20px;
            padding-bottom: 10px;
            font-size: 1.3rem;
            font-weight: 510;
        }
        h4 {
            font-size: 1rem;
        }
        h1 > a, h2 > a, h3 > a, h4 > a {
            color: black;
            text-decoration: none;
        }
        h1 > a:hover, h2 > a:hover, h3 > a:hover, h4 > a:hover {
            color: black;
            text-decoration: underline;
            cursor: pointer;
        }
        h1 > a:hover::before, h2 > a:hover::before, h3 > a:hover::before, h4 > a:hover::before {
            content: '# ';
        }

        p {
            padding: 8px 0;
        }

        strong {
            font-weight: 510;
        }

        ul {
            list-style: none;
            padding: 6px 0 6px 10px;
        }
        ul > li {
            padding: 2px 0;
        }
        ul > li::before {
            content: '- ';
        }

        table {
            border-collapse: collapse;
        }
        tr {
            border-bottom: 1px solid black;
        }
        td, th {
            padding: 10px;
        }

        pre {
            padding: 10px 10px;
            border-radius: 5px;
            background-color: #EEEEEE;
            margin: 20px 0;
        }

        hr {
            color: #BBBBBB;
            margin-bottom: 20px;
        }

        /*--- actual content ---*/

        .content {
            padding: 30px 200px;
            margin-bottom: 30px;
            font-size: 18px;
        }
        .main {
            width: 80%;
            float: left;
            padding-bottom: 30px;
        }
        .infobar {
            width: 15%;
            float: right;
            padding-bottom: 30px;
        }

        /*--- documentation generation ---*/
        .doc-member {
            padding: 5px 0 5px 20px;
            margin: 30px 0 0 0;
            border-left: 2px solid #888888;
        }

        /*--- navigation bar ---*/

        .nav-bar {
            display: block;
            background-color: #220022;
            padding: 0 200px;
            font-weight: bold;
        }
        .nav-bar > * > .expand-base {
            /* add padding to the expands in the nav bar */
            padding-left: 15px;
            padding-right: 65px;
            padding-bottom: 20px;
            padding-top: 20px;
        }
        .nav-bar a, .expand-base {
            cursor: pointer;
            color: white;
            text-decoration: none;
        }
        .nav-bar a:hover, .expand-base:hover {
            color: #88BB88;
        }

        /*--- expand/dropdown ---*/

        .expand {
            display: inline-block;
            position: relative;
        }
        .expand-base {
            width: 100%;
            height: 100%;
            display: inline-block;
        }
        .expand-list {
            display: none;
            position: absolute;
            z-index: 1;
            border: 3px solid #220022;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        .expand:hover.down > .expand-list {
            display: block;
        }
        .expand:hover.side > .expand-list {
            display: inline-block;
        }
        .expand-list > * {
            display: inline-block;
            min-width: 140px;
            padding: 15px;
            background-color: #220022;
        }

        /*--- syntax highlighting ---*/
        code {
            font-family: 'consolas', 'Courier New', 'Courier', 'monospace';
            color: #444444;
        }
        code.lang-json .hljs-attr {
            color: #6666BB;
        }
        code .hljs-string, code .hlj-number {
            color: #FF6666;
        }
        code .hljs-comment {
            color: #446622;
        }
        code .hljs-keyword {
            color: #4488CC;
        }
        code .hljs-meta {
            color: #6666BB;
        }
        code.lang-none * {
            color: #444444 !important;
        }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <span id="nav-projects" class="expand down">
            <a href="/projects" class="expand-base">
                Projects
            </a>
            <div class="expand-list">
                <a href="/projects/eqpad">Equation Notepad</a>
                <a href="/projects/iunctio">Iunctio</a>
            </div>
        </span>

        <span id="nav-docs" class="expand down">
            <a href="/docs" class="expand-base">
                Documentation
            </a>
            <div class="expand-list">
                <a href=".">No Docs Yet</a>
            </div>
        </span>

        <span id="nav-articles" class="expand down">
            <a href="/articles" class="expand-base">
                Articles
            </a>
            <div class="expand-list">
                <a href=".">No Articles Yet</a>
            </div>
        </span>

        <span id="nav-resources" class="expand down">
            <a href="/resources" class="expand-base">
                Resources
            </a>
            <div class="expand-list">
                <a href=".">No Resources Yet</a>
            </div>
        </span>

        <span id="nav-links" class="expand down">
            <a href="/links" class="expand-base">
                Links
            </a>
            <div class="expand-list">
                <a href="https://github.com/w2ptr">Github Profile</a>
            </div>
        </span>
    </nav>

    <div class="content">
        <main class="main">
                        <h1 id="mididi.reader"><a href="#mididi.reader">Module mididi.reader</a></h1>
            <hr />

            <p><p><code>mididi.reader</code> contains functions for reading the MIDI format.</p>
<p>Currently, the reader is compatible with the standard MIDI format 1.0 and
forward compatible with newer formats (in which case newer features will be
ignored, as the specification demands).</p>
<p>The implementation (and some of the documentation) is based on this specification:
<a href="https://www.cs.cmu.edu/%7Emusic/cmsip/readings/Standard-MIDI-file-format-updated.pdf">https://www.cs.cmu.edu/~music/cmsip/readings/Standard-MIDI-file-format-updated.pdf</a></p>
<p><strong>Authors:</strong>
Wout Huynen</p>
</p>

            <h2 id="mididi.reader-members"><a href="#mididi.reader-members">Members</a></h2>

            <table><tbody>
            <tr>
                <th>Name</th>
                <th>Kind</th>
                <th>Description</th>
            </tr>
                <tr>
                <td><a href="#mididi.reader.readMIDIFile"><code>readMIDIFile</code></a></td>
                <td>template</td>
                <td>description</td>
                </tr>
            
                <tr>
                <td><a href="#mididi.reader.readMIDIFile"><code>readMIDIFile</code></a></td>
                <td>template</td>
                <td>description</td>
                </tr>
            
                <tr>
                <td><a href="#mididi.reader.MIDIReader"><code>MIDIReader</code></a></td>
                <td>template</td>
                <td>description</td>
                </tr>
            </tbody></table>

            <div class="doc-member">
                        <h3 id="mididi.reader.readMIDIFile"><a href="#mididi.reader.readMIDIFile">function <code>MIDI readMIDIFile()(File file)</code></a></h3>
                    
                        <h3 id="mididi.reader.readMIDIFile"><a href="#mididi.reader.readMIDIFile">function <code>MIDI readMIDIFile()(string path)</code></a></h3>
                    <p><code>readMIDIFile()</code> reads a MIDI file, of course.</p>
<p>This essentially does the same as <code>MIDIReader!(ubyte[]).readMIDI()</code>, but is
given for convenience.</p>
<p>It has two overloads, one for <code>std.stdio.File</code> objects, and one if you have the
file path only.</p>
</div><div class="doc-member">
                        <h3 id="mididi.reader.MIDIReader"><a href="#mididi.reader.MIDIReader">struct <code>MIDIReader(T)</code></a></h3>
                    <p><code>MIDIReader</code> is the raw MIDI reader object.</p>
<p>This can be used to read the standard MIDI chunk-by-chunk or event-by-event.</p>
<p><strong>Constraints:</strong>
<code>T</code> must be an input range of <code>ubyte</code></p>
<p><strong>Example:</strong>
Reads a complete file with a single track of a single event</p>
<pre><code>import mididi.def : MetaEventType, TrackFormat;

auto reader = MIDIReader!(ubyte[])([
    'M', 'T', 'h', 'd', // header chunk
    0x00, 0x00, 0x00, 0x06, // length
    0x00, 0x01, // format 1
    0x00, 0x02, // 2 tracks
    0b0_0000000, 0x60, // time division: 0, 0, 0x60

    'M', 'T', 'r', 'k', // track chunk 1
    0, 0, 0, 4, // length = 4
    0x00, 0xFF, 0x2F, 0x00, // end of track

    'M', 'T', 'r', 'k', // track chunk 2
    0, 0, 0, 4, // length = 4
    0x00, 0xFF, 0x2F, 0x00, // end of track
]);
auto midi = reader.readMIDI();

assert(midi.headerChunk.trackFormat == TrackFormat.simultaneous);
assert(midi.headerChunk.nTracks == 2);
assert(midi.headerChunk.division.getFormat() == 0);
assert(midi.headerChunk.division.getTicksPerQuarterNote() == 0x0060);

assert(midi.trackChunks.length == 2);
assert(midi.trackChunks[0].events.length == 1);
const event = midi.trackChunks[0].events[0];
assert(event.asMetaEvent().type == MetaEventType.endOfTrack);

</code></pre>
<p><strong>Example:</strong>
Reads a file that has bytes past the last chunk, which is disallowed.</p>
<pre><code>auto reader = MIDIReader!(ubyte[])([
    'M', 'T', 'h', 'd',
    0x00, 0x00, 0x00, 0x06, // length
    0x00, 0x00, // format: 0
    0x00, 0x01, // nTracks: 1
    0b0_0000000, 0x60, // time division: 0, 0, 0x60

    'M', 'T', 'r', 'k',
    0, 0, 0, 4,
    0x00, 0xFF, 0x2F, 0x00,

    'M', 'T', 'r', 'k', // too many chunks
    0, 0, 0, 4,
    0x00, 0xFF, 0x2F, 0x00,
]);

try {
    const _ = reader.readMIDI();
    assert(false, &quot;File is invalid, but no exception was thrown&quot;);
} catch (Exception e) {}

</code></pre>
<div class="doc-member">
                <h3 id="mididi.reader.MIDIReader.MIDIReader.constructor-36419"><a href="#mididi.reader.MIDIReader.MIDIReader.constructor-36419">constructor <code>this(T range)</code></a></h3>
            </div><div class="doc-member">
                <h3 id="mididi.reader.MIDIReader.MIDIReader.readMIDI"><a href="#mididi.reader.MIDIReader.MIDIReader.readMIDI">method <code>MIDI readMIDI()</code></a></h3>
            <p>Reads the entire input and returns the data in a <code>MIDI</code> object.</p>
<p><strong>Throws:</strong>
<code>Exception</code> if all chunks are read and the input is not empty yet;
<code>Exception</code> if the header chunk or any of the track chunks is invalid</p>
</div><div class="doc-member">
                <h3 id="mididi.reader.MIDIReader.MIDIReader.readChunk"><a href="#mididi.reader.MIDIReader.MIDIReader.readChunk">method <code>Chunk readChunk()</code></a></h3>
            <p>Reads a chunk from the input (meaning, it can either read a header chunk or
a track chunk).</p>
<p><strong>Throws:</strong>
<code>Exception</code> if the chunk is invalid</p>
</div><div class="doc-member">
                <h3 id="mididi.reader.MIDIReader.MIDIReader.readHeaderChunk"><a href="#mididi.reader.MIDIReader.MIDIReader.readHeaderChunk">method <code>HeaderChunk readHeaderChunk()</code></a></h3>
            </div><div class="doc-member">
                <h3 id="mididi.reader.MIDIReader.MIDIReader.readTrackChunk"><a href="#mididi.reader.MIDIReader.MIDIReader.readTrackChunk">method <code>TrackChunk readTrackChunk()</code></a></h3>
            </div><div class="doc-member">
                <h3 id="mididi.reader.MIDIReader.MIDIReader.isFinished"><a href="#mididi.reader.MIDIReader.MIDIReader.isFinished">method <code>const pure nothrow @nogc @safe bool isFinished()</code></a></h3>
            <p><strong>Returns:</strong>
whether the reader has no more content to read.</p>
</div></div>

            <h2 id="mididi.reader-source"><a href="#mididi.reader-source">Source</a></h2>
            <p><a href="https://github.com/w2ptr/midi-di">Click here to view the source of this module.</a></p>
        

        </main>

        <aside class="infobar">
            


        </aside>
    </div>

    <script lang="javascript">
        console.log("javascript");
    </script>
</body>
</html>
